# GOMFLOW WhatsApp Service - Production Environment Variables

# Twilio Configuration
TWILIO_ACCOUNT_SID=your_twilio_account_sid_here
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here
TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886
TWILIO_WEBHOOK_URL=https://gomflow-whatsapp.railway.app/webhook/twilio

# Database Configuration
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# Service URLs
CORE_API_URL=https://gomflow.com/api
SMART_AGENT_SERVICE_URL=https://gomflow-smart-agent.railway.app
PAYMENTS_SERVICE_URL=https://gomflow-payments.railway.app

# Service Authentication
INTERNAL_SERVICE_KEY=your_internal_service_key_here
CORE_API_KEY=your_core_api_key_here

# Redis Configuration (for queues and message tracking)
REDIS_URL=redis://your-redis-url:6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=2
REDIS_KEY_PREFIX=gomflow:whatsapp:

# Queue Configuration
BULL_BOARD_ENABLED=false
QUEUE_CONCURRENCY=20
QUEUE_MAX_STALLED_COUNT=3
QUEUE_MAX_STALLED_INTERVAL=30000

# WhatsApp Configuration
DEFAULT_LANGUAGE=en
MESSAGE_RETRY_ATTEMPTS=3
MESSAGE_RETRY_DELAY=5000
MESSAGE_DELIVERY_TIMEOUT=30000

# Auto-Reply Configuration
ENABLE_AUTO_REPLIES=true
AUTO_REPLY_COOLDOWN=60000
STATUS_CHECK_COOLDOWN=300000

# Rate Limiting
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX_HITS=100
RATE_LIMIT_SKIP_SUCCESSFUL=true

# File Handling Configuration
MAX_MEDIA_SIZE=16777216
ALLOWED_MEDIA_TYPES=image/jpeg,image/png,image/webp,image/heic,application/pdf
TEMP_DIR=/tmp/whatsapp-media

# Environment
NODE_ENV=production
PORT=3000

# Analytics & Monitoring
SENTRY_DSN=your_sentry_dsn_here
SENTRY_ORG=your_sentry_org
SENTRY_PROJECT=gomflow-whatsapp

# Message Templates
ENABLE_TEMPLATE_MESSAGES=true
TEMPLATE_NAMESPACE=your_template_namespace
TEMPLATE_LANGUAGE_CODE=en

# Webhook Configuration
WEBHOOK_VERIFICATION_TOKEN=your_webhook_verification_token
WEBHOOK_SIGNING_SECRET=your_webhook_signing_secret

# Notification Configuration
NOTIFICATION_RETRY_ATTEMPTS=3
NOTIFICATION_RETRY_DELAY=5000
BULK_NOTIFICATION_BATCH_SIZE=100

# Message Processing
ENABLE_MESSAGE_LOGGING=true
ENABLE_DELIVERY_RECEIPTS=true
ENABLE_READ_RECEIPTS=true

# Health Check
HEALTH_CHECK_INTERVAL=30000
TWILIO_CONNECTION_CHECK=true

# Error Recovery
MAX_RETRIES=3
RETRY_DELAY=5000
CIRCUIT_BREAKER_THRESHOLD=10

# Security
VERIFY_TWILIO_SIGNATURE=true
ALLOWED_WEBHOOK_IPS=54.172.60.0/23,54.244.51.0/24
SECURE_WEBHOOK_URL=true

# Performance
MESSAGE_QUEUE_PRIORITY=normal
BULK_MESSAGE_BATCH_SIZE=50
MESSAGE_PROCESSING_CONCURRENCY=10